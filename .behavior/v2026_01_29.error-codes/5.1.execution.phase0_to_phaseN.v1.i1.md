# execution: error codes

> progress tracker for the roadmap

---

## phase 0: preparation

- [x] read .behavior/v2026_01_29.error-codes/0.wish.md
- [x] read .behavior/v2026_01_29.error-codes/1.vision.md
- [x] read .behavior/v2026_01_29.error-codes/2.1.criteria.blackbox.md
- [x] read .behavior/v2026_01_29.error-codes/2.3.criteria.blueprint.md
- [x] read .behavior/v2026_01_29.error-codes/3.3.blueprint.v1.i1.md
- [x] read .behavior/v2026_01_29.error-codes/4.1.roadmap.v1.i1.md

**status**: âœ… complete

---

## phase 1: type and static code

- [x] 1.1: add `HelpfulErrorCode` type to src/HelpfulError.ts
- [x] 1.2: add `static code: HelpfulErrorCode | undefined = undefined` to HelpfulError
- [x] 1.3: add `static code = { http: 400 } as const` to BadRequestError
- [x] 1.4: add `static code = { http: 500 } as const` to UnexpectedCodePathError
- [x] 1.5: export `HelpfulErrorCode` type from src/index.ts

**status**: âœ… complete (verified: npm run test:types passed)

---

## phase 2: constructor and original storage

- [x] 2.1: update `original` private type to include `code?: HelpfulErrorCode | null`
- [x] 2.2: update constructor to extract `code` from metadata and store in `original.code`
- [x] 2.3: update `metadataWithoutCause` to also omit `code` (renamed to `metadataForMessage`)

**status**: âœ… complete (verified: npm run test:types passed)

---

## phase 3: code getter

- [x] 3.1: implement `get code(): HelpfulErrorCode | undefined` on HelpfulError
- [x] 3.2: getter reads static code from `this.constructor`
- [x] 3.3: getter reads instance code from `this.original.code`
- [x] 3.4: getter returns undefined if `original.code === null`
- [x] 3.5: getter merges class + instance (instance fields override)
- [x] 3.6: getter returns undefined if no code anywhere

**status**: âœ… complete

---

## phase 4: metadata getter update

- [x] 4.1: update `get metadata()` to omit `code` field from returned metadata

**status**: âœ… complete

---

## phase 5: serialization

- [x] 5.1: update `toJSON()` to check `this.code?.slug`
- [x] 5.2: if slug present, include `code` in output object
- [x] 5.3: if slug absent, omit `code` from output object

**status**: âœ… complete (verified: npm run test:types passed)

---

## phase 6: unit tests â€” HelpfulError

- [x] 6.1: add `describe('code')` block
- [x] 6.2: add tests for getter
- [x] 6.3: add tests for static code
- [x] 6.4: add tests for serialization
- [x] 6.5: add tests for metadata isolation
- [x] 6.6: add tests for inheritance

**status**: âœ… complete (56 tests passed)

---

## phase 7: unit tests â€” BadRequestError

- [x] 7.1: add `describe('code')` block
- [x] 7.2-7.8: add code tests

**status**: âœ… complete (11 tests passed)

---

## phase 8: unit tests â€” UnexpectedCodePathError

- [x] 8.1: add `describe('code')` block
- [x] 8.2-8.6: add code tests

**status**: âœ… complete (9 tests passed)

---

## phase 9: backwards compatibility

- [x] 9.1: verify prior patterns still work
- [x] 9.2: verify error.message unchanged
- [x] 9.3: verify error.metadata unchanged
- [x] 9.4: verify snapshots

**status**: âœ… complete (all prior tests pass, snapshots unchanged)

---

## phase 10: full validation

- [x] 10.1: run type checks (passed)
- [x] 10.2: run all unit tests (79 tests passed)
- [x] 10.3: run lint checks (passed)
- [x] 10.4: run format checks (passed)
- [x] 10.5: verify all blackbox criteria satisfied

**status**: âœ… complete

---

## phase 11: cleanup and commit

- [x] 11.1: review all changes
- [x] 11.2: update snapshots if needed (none needed)
- [x] 11.3: update readme.md with .code documentation
- [ ] 11.4: stage changes
- [ ] 11.5: commit with descriptive message

**status**: ðŸ”„ ready for user commit
